{"version":3,"sources":["components/enemy.js","primitives/a-enemy.js","index.js"],"names":["AFRAME","registerComponent","schema","speed","type","init","directionVec3","THREE","Vector3","el","addEventListener","window","dispatchEvent","CustomEvent","detail","value","getAttribute","entity","parentNode","removeChild","tick","targetPosition","x","y","z","currentPosition","object3D","position","copy","sub","distance","length","factor","data","axis","forEach","setAttribute","extendDeep","utils","meshMixin","primitives","getMeshMixin","registerPrimitive","defaultComponents","enemy","scale","rotation","mappings","enemyData","model","GAME_TIMER","onload","intervalFunc","gameStart","score","countdown","startButtonElm","document","getElementById","scoreElm","scoreEnemyElm","startingElm","gameoverElm","evt","target","setInterval","i","Math","floor","random","newEnemy","createElement","ramdomEnemy","seletedEnemyData","appendChild","setTimeout","querySelectorAll","e","clearInterval","enemyPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAA;;AAEA;;AAEA,IAAMgD,YAAY,CAChB;AACEC,SAAO;AADT,CADgB,EAIhB;AACEA,SAAO;AADT,CAJgB,EAOhB;AACEA,SAAO;AADT,CAPgB,CAAlB;;AAYA,IAAMC,aAAa,EAAnB;;AAEAvC,OAAOwC,MAAP,GAAgB,YAAY;AAC1B,MAAIC,eAAe,EAAnB;;AAEA,MAAIC,YAAY,KAAhB;AACA,MAAIC,QAAQ,CAAZ;AACA,MAAIC,YAAYL,UAAhB;AACA,MAAIM,iBAAiBC,SAASC,cAAT,CAAwB,cAAxB,CAArB;AACA,MAAIC,WAAWF,SAASC,cAAT,CAAwB,OAAxB,CAAf;AACA,MAAIE,gBAAgBH,SAASC,cAAT,CAAwB,aAAxB,CAApB;AACA,MAAIG,cAAcJ,SAASC,cAAT,CAAwB,UAAxB,CAAlB;AACA,MAAII,cAAcL,SAASC,cAAT,CAAwB,UAAxB,CAAlB;;AAEAG,cAAYzB,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;;AAEAoB,iBAAe9C,gBAAf,CAAgC,WAAhC,EAA6C,eAAO;AAClD,QAAI,CAAC2C,SAAL,EAAgB;AACdA,kBAAY,IAAZ;AACAC,cAAQ,CAAR;AACAC,kBAAYL,UAAZ;AACAa,UAAIC,MAAJ,CAAW5B,YAAX,CAAwB,SAAxB,EAAmC,KAAnC;AACAyB,kBAAYzB,YAAZ,CAAyB,SAAzB,EAAoC,IAApC;AACAyB,kBAAYzB,YAAZ,CAAyB,OAAzB,EAAkCmB,SAAlC;AACAK,oBAAcxB,YAAd,CAA2B,SAA3B,EAAsC,IAAtC;AACAwB,oBAAcxB,YAAd,CAA2B,UAA3B,EAAuC,QAAvC;AACAuB,eAASvB,YAAT,CAAsB,OAAtB,EAA+BkB,KAA/B;AACAQ,kBAAY1B,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;;AAEAgB,qBAAea,YAAY,YAAM;AAC/B,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAKC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,IAAgC,CAArD,EAAyDH,GAAzD,EAA6D;AAC3D,cAAII,WAAYb,SAASc,aAAT,CAAuB,SAAvB,CAAhB;AACA,cAAIC,cAAcL,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,CAAlB;AACA,cAAII,mBAAmBzB,UAAUwB,WAAV,CAAvB;AACAF,mBAASlC,YAAT,CAAsB,YAAtB,EAAoCqC,iBAAiBxB,KAArD;AACAqB,mBAASlC,YAAT,CAAsB,UAAtB,EAAkC,aAAc+B,KAAKE,MAAL,KAAgB,CAAjB,GAAsB,GAAnC,CAAlC;AACAC,mBAASlC,YAAT,CAAsB,OAAtB,EAAiC+B,KAAKE,MAAL,KAAgB,IAAjB,GAAyB,IAAzD;AACAC,mBAASlC,YAAT,CAAsB,iBAAtB,EAAyC,EAAzC;AACAqB,mBAASC,cAAT,CAAwB,OAAxB,EAAiCgB,WAAjC,CAA6CJ,QAA7C;AACD;;AAEDf,qBAAa,CAAb;AACAM,oBAAYzB,YAAZ,CAAyB,OAAzB,EAAkCmB,SAAlC;AACD,OAdc,EAcZ,IAdY,CAAf;;AAgBAoB,iBAAW,YAAM;AACfZ,YAAIC,MAAJ,CAAW5B,YAAX,CAAwB,SAAxB,EAAmC,IAAnC;AACAyB,oBAAYzB,YAAZ,CAAyB,SAAzB,EAAoC,KAApC;AACAwB,sBAAcxB,YAAd,CAA2B,SAA3B,EAAsC,KAAtC;AACA0B,oBAAY1B,YAAZ,CAAyB,SAAzB,EAAoC,IAApC;;AAEAqB,iBAASmB,gBAAT,CAA0B,SAA1B,EAAqCzC,OAArC,CAA6C;AAAA,iBAAK0C,EAAE3D,UAAF,CAAaC,WAAb,CAAyB0D,CAAzB,CAAL;AAAA,SAA7C;;AAEAC,sBAAc1B,YAAd;AACAC,oBAAY,KAAZ;AACD,OAVD,EAUGH,aAAa,IAVhB;AAWD;AACF,GAzCD;;AA2CAvC,SAAOD,gBAAP,CAAwB,WAAxB,EAAqC,eAAO;AAC1C4C,aAAS,CAAT;AACAK,aAASvB,YAAT,CAAsB,OAAtB,EAA+BkB,KAA/B;;AAEA,QAAIyB,gBAAgBhB,IAAIjD,MAAJ,CAAWC,KAA/B;AACAgE,kBAAcxD,CAAd,IAAmB,GAAnB;;AAEAqC,kBAAcxB,YAAd,CAA2B,OAA3B,EAAoC,IAApC;AACAwB,kBAAcxB,YAAd,CAA2B,UAA3B,EAAuC2C,aAAvC;AACD,GATD;;AAWApE,SAAOD,gBAAP,CAAwB,cAAxB,EAAwC,eAAO;AAC7C4C,aAAS,CAAT;AACAK,aAASvB,YAAT,CAAsB,OAAtB,EAA+BkB,KAA/B;;AAEAM,kBAAcxB,YAAd,CAA2B,OAA3B,EAAoC,IAApC;AACA,QAAI2C,gBAAgBhB,IAAIjD,MAAJ,CAAWC,KAA/B;AACAgE,kBAAcxD,CAAd,IAAmB,GAAnB;;AAEAqC,kBAAcxB,YAAd,CAA2B,UAA3B,EAAuC2C,aAAvC;AACD,GATD;AAUD,CA9ED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AFlBA/E,OAAOC,iBAAP,CAAyB,OAAzB,EAAkC;AAChCC,UAAQ;AACNC,WAAO,EAACC,MAAM,QAAP;AADD,GADwB;AAIhCC,QAAM,gBAAY;AAAA;;AAChB,SAAKC,aAAL,GAAqB,IAAIC,MAAMC,OAAV,EAArB;;AAEA,SAAKC,EAAL,CAAQC,gBAAR,CAAyB,WAAzB,EAAsC,YAAM;AAC1CC,aAAOC,aAAP,CAAqB,IAAIC,WAAJ,CAAgB,WAAhB,EAA6B,EAAEC,QAAQ,EAAEC,OAAO,MAAKN,EAAL,CAAQO,YAAR,CAAqB,UAArB,CAAT,EAAV,EAA7B,CAArB;AACA,UAAIC,SAAS,MAAKR,EAAlB;AACAQ,aAAOC,UAAP,CAAkBC,WAAlB,CAA8BF,MAA9B;AACD,KAJD;AAKD,GAZ+B;AAahCG,QAAM,gBAAY;AAChB,QAAId,gBAAgB,KAAKA,aAAzB;AACA,QAAIe,iBAAiB,IAAId,MAAMC,OAAV,EAArB;AACAa,mBAAeC,CAAf,GAAmB,GAAnB;AACAD,mBAAeE,CAAf,GAAmB,CAAnB;AACAF,mBAAeG,CAAf,GAAmB,CAAnB;;AAEA,QAAIC,kBAAkB,KAAKhB,EAAL,CAAQiB,QAAR,CAAiBC,QAAvC;;AAEArB,kBAAcsB,IAAd,CAAmBP,cAAnB,EAAmCQ,GAAnC,CAAuCJ,eAAvC;;AAEA,QAAIK,WAAWxB,cAAcyB,MAAd,EAAf;;AAEA,QAAID,WAAW,CAAf,EAAkB;AAChB,UAAIb,SAAS,KAAKR,EAAlB;AACAQ,aAAOC,UAAP,CAAkBC,WAAlB,CAA8BF,MAA9B;AACAN,aAAOC,aAAP,CAAqB,IAAIC,WAAJ,CAAgB,cAAhB,EAAgC,EAAEC,QAAQ,EAAEC,OAAO,KAAKN,EAAL,CAAQO,YAAR,CAAqB,UAArB,CAAT,EAAV,EAAhC,CAArB;AACA;AACD;;AAED,QAAIgB,SAAS,KAAKC,IAAL,CAAU9B,KAAV,GAAkB2B,QAA/B;AACA,QAAII,OAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAX;AACAA,SAAKC,OAAL,CAAa,UAAUD,IAAV,EAAgB;AAC3B5B,oBAAc4B,IAAd,KAAuBF,UAAU,OAAO,IAAjB,CAAvB;AACD,KAFD;;AAIA,SAAKvB,EAAL,CAAQ2B,YAAR,CAAqB,UAArB,EAAiC;AAC/Bd,SAAGG,gBAAgBH,CAAhB,GAAoBhB,cAAcgB,CADN;AAE/BC,SAAGE,gBAAgBF,CAAhB,GAAoBjB,cAAciB,CAFN;AAG/BC,SAAGC,gBAAgBD,CAAhB,GAAoBlB,cAAckB;AAHN,KAAjC;AAKD;AA5C+B,CAAlC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,IAAMa,aAAarC,OAAOsC,KAAP,CAAaD,UAAhC;;AAEA,IAAME,YAAYvC,OAAOwC,UAAP,CAAkBC,YAAlB,EAAlB;;AAEAzC,OAAO0C,iBAAP,CAAyB,SAAzB,EAAoC;AAClCC,qBAAmB;AACjBC,WAAO,EAAEzC,OAAO,MAAT,EADU;AAEjB,uBAAmB,EAFF;AAGjBwB,cAAU,QAHO;AAIjBkB,WAAO,aAJU;AAKjBC,cAAU;AALO,GADe;AAQlCC,YAAU;AACR5C,WAAO;AADC;AARwB,CAApC","file":"example.a5069edc.map","sourceRoot":"..","sourcesContent":["AFRAME.registerComponent('enemy', {\n  schema: {\n    speed: {type: 'number'}\n  },\n  init: function () {\n    this.directionVec3 = new THREE.Vector3()\n\n    this.el.addEventListener('mousedown', () => {\n      window.dispatchEvent(new CustomEvent('add-score', { detail: { value: this.el.getAttribute('position') } }))\n      let entity = this.el\n      entity.parentNode.removeChild(entity)\n    })\n  },\n  tick: function () {\n    let directionVec3 = this.directionVec3\n    let targetPosition = new THREE.Vector3()\n    targetPosition.x = 1.3\n    targetPosition.y = 0\n    targetPosition.z = 0\n\n    let currentPosition = this.el.object3D.position\n\n    directionVec3.copy(targetPosition).sub(currentPosition);\n\n    let distance = directionVec3.length();\n\n    if (distance < 1) {\n      let entity = this.el\n      entity.parentNode.removeChild(entity)\n      window.dispatchEvent(new CustomEvent('remove-score', { detail: { value: this.el.getAttribute('position') } }))\n      return\n    }\n\n    let factor = this.data.speed / distance\n    let axis = ['x', 'y', 'z']\n    axis.forEach(function (axis) {\n      directionVec3[axis] *= factor * (0.01 / 1000)\n    })\n\n    this.el.setAttribute('position', {\n      x: currentPosition.x + directionVec3.x,\n      y: currentPosition.y + directionVec3.y,\n      z: currentPosition.z + directionVec3.z\n    })\n  }\n})","const extendDeep = AFRAME.utils.extendDeep\n\nconst meshMixin = AFRAME.primitives.getMeshMixin()\n\nAFRAME.registerPrimitive('a-enemy', {\n  defaultComponents: {\n    enemy: { speed: '1000' },\n    'animation-mixer': '',\n    position: '-1 0 0',\n    scale: '0.3 0.3 0.3',\n    rotation: \"0 90 0\"\n  },\n  mappings: {\n    speed: 'enemy.speed'\n  }\n})\n","import './components/enemy'\n\nimport './primitives/a-enemy'\n\nconst enemyData = [\n  {\n    model: '#bad-boss'\n  },\n  {\n    model: '#caveman'\n  },\n  {\n    model: '#dictator'\n  }\n]\n\nconst GAME_TIMER = 15\n\nwindow.onload = function () {\n  let intervalFunc = ''\n\n  let gameStart = false\n  let score = 0\n  let countdown = GAME_TIMER\n  let startButtonElm = document.getElementById('start-button')\n  let scoreElm = document.getElementById('score')\n  let scoreEnemyElm = document.getElementById('score-enemy')\n  let startingElm = document.getElementById('starting')\n  let gameoverElm = document.getElementById('gameover')\n\n  startingElm.setAttribute('visible', false)\n\n  startButtonElm.addEventListener('mousedown', evt => {\n    if (!gameStart) {\n      gameStart = true\n      score = 0\n      countdown = GAME_TIMER\n      evt.target.setAttribute('visible', false)\n      startingElm.setAttribute('visible', true)\n      startingElm.setAttribute('value', countdown)\n      scoreEnemyElm.setAttribute('visible', true)\n      scoreEnemyElm.setAttribute('position', '0 -1 0')\n      scoreElm.setAttribute('value', score)\n      gameoverElm.setAttribute('visible', false)\n\n      intervalFunc = setInterval(() => {\n        for (let i = 0; i < (Math.floor(Math.random() * 3) + 1); i++){\n          let newEnemy  = document.createElement('a-enemy')\n          let ramdomEnemy = Math.floor(Math.random() * 3)\n          let seletedEnemyData = enemyData[ramdomEnemy]\n          newEnemy.setAttribute('gltf-model', seletedEnemyData.model)\n          newEnemy.setAttribute('position', '-1 0.5 ' + ((Math.random() * 2) - 0.5))\n          newEnemy.setAttribute('speed', ((Math.random() * 1000) + 1000))\n          newEnemy.setAttribute('animation-mixer', {})\n          document.getElementById('scene').appendChild(newEnemy)\n        }\n\n        countdown -= 1\n        startingElm.setAttribute('value', countdown)\n      }, 1000)\n\n      setTimeout(() => {\n        evt.target.setAttribute('visible', true)\n        startingElm.setAttribute('visible', false)\n        scoreEnemyElm.setAttribute('visible', false)\n        gameoverElm.setAttribute('visible', true)\n\n        document.querySelectorAll('a-enemy').forEach(e => e.parentNode.removeChild(e));\n\n        clearInterval(intervalFunc)\n        gameStart = false\n      }, GAME_TIMER * 1000)\n    }\n  })\n\n  window.addEventListener('add-score', evt => {\n    score += 1\n    scoreElm.setAttribute('value', score)\n\n    let enemyPosition = evt.detail.value\n    enemyPosition.y += 0.5\n\n    scoreEnemyElm.setAttribute('value', '+1')\n    scoreEnemyElm.setAttribute('position', enemyPosition)\n  })\n\n  window.addEventListener('remove-score', evt => {\n    score -= 1\n    scoreElm.setAttribute('value', score)\n\n    scoreEnemyElm.setAttribute('value', '-1')\n    let enemyPosition = evt.detail.value\n    enemyPosition.y += 0.5\n\n    scoreEnemyElm.setAttribute('position', enemyPosition)\n  })\n}"]}